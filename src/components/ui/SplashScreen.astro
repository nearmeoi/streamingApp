---

---

<div
    id="splash-screen"
    class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-base transition-opacity duration-500 hidden"
>
    <div class="flex flex-col items-center gap-4 animate-fade-in-up">
        <img
            src="/logo_typhography.png"
            alt="HuaStream"
            class="h-16 md:h-24 w-auto object-contain"
        />
        <div
            class="loading-bar w-32 h-1 bg-white/10 rounded-full overflow-hidden mt-4"
        >
            <div class="h-full bg-accent animate-loading-progress w-full"></div>
        </div>
    </div>
</div>

<style>
    @keyframes loading-progress {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(0%);
        }
    }
    .animate-loading-progress {
        animation: loading-progress 1.2s ease-in-out;
    }
    .animate-fade-in-up {
        animation: fadeInUp 0.3s ease-out forwards;
    }
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    // Only run on initial page load, not on View Transitions navigation
    const initSplash = () => {
        const splash = document.getElementById("splash-screen");
        if (!splash) return;

        // Use localStorage so it only shows ONCE EVER (not per session)
        const hasSeenSplash = localStorage.getItem("huastream_splash_seen");

        if (hasSeenSplash) {
            // Don't show splash on subsequent visits
            splash.remove();
        } else {
            // First time visitor - show splash briefly
            splash.classList.remove("hidden");

            setTimeout(() => {
                splash.classList.add("opacity-0", "pointer-events-none");
                setTimeout(() => {
                    splash.remove();
                    localStorage.setItem("huastream_splash_seen", "true");
                }, 500);
            }, 1500); // Reduced from 2500ms to 1500ms
        }
    };

    // Only init on first load, NOT on astro:page-load (View Transitions)
    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initSplash);
    } else {
        initSplash();
    }
</script>
