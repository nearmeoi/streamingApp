---
const navItems = [
  {
    label: "Beranda",
    href: "/",
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',
  },
  {
    label: "Jadwal",
    href: "/schedule",
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>',
  },
  {
    label: "Genre",
    href: "/genres",
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>',
  },
  {
    label: "Daftar Saya",
    href: "/mylist",
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>',
  },
  {
    label: "Profil",
    href: "/profile",
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',
  },
];

const currentPath = Astro.url.pathname;
---

<nav
  class="md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 bg-surface/80 backdrop-blur-xl border border-white/10 rounded-full shadow-2xl shadow-black/50 z-50 pb-safe px-6 min-w-fit"
>
  <div class="flex items-center justify-center gap-6 h-16 relative">
    {
      navItems.map((item) => {
        const isActive =
          currentPath === item.href ||
          (item.href !== "/" && currentPath.startsWith(item.href));

        return (
          <a
            href={item.href}
            aria-label={item.label}
            class={`relative flex items-center justify-center w-10 h-10 rounded-full transition-colors z-10 ${
              isActive ? "text-white" : "text-secondary hover:text-primary"
            }`}
          >
            {isActive && (
              <div
                class="absolute inset-0 bg-accent rounded-full -z-10 shadow-[0_0_15px_rgba(109,40,217,0.5)]"
                style="view-transition-name: nav-active-pill;"
              />
            )}

            <div
              class={
                isActive
                  ? "scale-110 transition-transform duration-300"
                  : "scale-100 transition-transform duration-300"
              }
            >
              <Fragment set:html={item.icon} />
            </div>

            {/* Label removed as requested */}
          </a>
        );
      })
    }
  </div>
</nav>
